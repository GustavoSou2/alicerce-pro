<div class="w-full">
  <div class="grid grid-cols-1 gap-4 sm:hidden">
    <div
      *ngFor="let row of data()"
      class="bg-white p-4 border border-gray-200 rounded-lg shadow-sm"
    >
      <h3
        *ngIf="cardTitleField() && row[cardTitleField()!]"
        class="text-lg font-semibold mb-2 text-slate-700 border-b pb-2"
      >
        {{ row[cardTitleField()!] }}
      </h3>

      <div
        *ngFor="let col of columns()"
        class="flex justify-between items-start py-1"
        [ngClass]="{ hidden: col.hideOnMobile }"
      >
        <span class="text-sm font-medium text-gray-500">{{ col.header }}:</span>
        <span class="text-sm font-semibold text-gray-900 text-right">
          <ng-container *ngIf="col.component; else defaultMobileValue">
            <ng-container
              *ngComponentOutlet="CustomCellRenderer(); inputs: { column: col, row: row }"
            ></ng-container>
          </ng-container>

          <ng-template #defaultMobileValue>
            {{ getCellValue(row, col) }}
          </ng-template>
        </span>
      </div>

      <div
        *ngIf="hasActionsColumn"
        class="mt-3 pt-3 border-t border-gray-100 flex justify-end gap-3"
      >
        <ng-container *ngFor="let action of actions()">
          <button
            *ngIf="!action.visible || action.visible(row)"
            (click)="action.action(row)"
            class="text-xs font-medium transition"
            [ngClass]="action.class"
          >
            <i *ngIf="action.icon" [class]="action.icon" class="mr-1"></i>
            {{ action.label }}
          </button>
        </ng-container>
      </div>
    </div>
  </div>

  <div class="hidden sm:block overflow-x-auto rounded-lg border border-gray-200">
    <table class="min-w-full divide-y divide-gray-200">
      <thead class="bg-gray-50 sm:table-header-group">
        <tr>
          <th
            *ngFor="let col of columns()"
            scope="col"
            class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider whitespace-nowrap"
          >
            {{ col.header }}
          </th>

          <th
            *ngIf="hasActionsColumn"
            scope="col"
            class="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider whitespace-nowrap"
          >
            Ações
          </th>
        </tr>
      </thead>

      <tbody class="bg-white divide-y divide-gray-200">
        <tr *ngFor="let row of data()">
          <td
            *ngFor="let col of columns()"
            class="px-6 py-4 whitespace-nowrap text-sm text-gray-700"
            [ngClass]="col.bodyClass"
          >
            <ng-container *ngIf="col.component; else defaultTableValue">
              <ng-container
                *ngComponentOutlet="col.component; inputs: { value: row[col.field], row: row }"
              ></ng-container>
            </ng-container>

            <ng-template #defaultTableValue>
              {{ getCellValue(row, col) }}
            </ng-template>
          </td>

          <td
            *ngIf="hasActionsColumn"
            class="px-6 py-4 whitespace-nowrap text-right text-sm font-medium"
          >
            <ng-container *ngFor="let action of actions()">
              <button
                *ngIf="!action.visible || action.visible(row)"
                (click)="action.action(row)"
                class="mr-3 transition text-xs font-medium"
                [ngClass]="action.class"
              >
                <i *ngIf="action.icon" [class]="action.icon" class="mr-1"></i>
                {{ action.label }}
              </button>
            </ng-container>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>
